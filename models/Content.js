const BaseModel = require('./BaseModel');
const rp = require('request-promise');

class ContentModel extends BaseModel {
  fetch() {
    const contentUrl = `${process.env.OCAPI_HOST}${process.env.OCAPI_PATH}/content/${this.__config.id}?client_id=${process.env.OCAPI_CLIENT_ID}`;

    return new Promise((resolve, reject) => {
      Promise.all([
        rp.get({
          uri: contentUrl,
          json: true
        })
      ])
      .then(([content]) => {
        resolve({ content });
      })
      .catch((err) => {
        reject(err);
      });
    });
  }

  _stubbedData() {
    return {
      _v: '17.1',
      _type: 'content',
      description: 'These terms of use set forth the basis on which you are permitted to access and use this website, demandware.com',
      id: 'terms',
      name: 'Terms & Conditions of Sale',
      c_body: "<h1 class=\"content-header\">Terms &amp; Conditions of Sale</h1>\r\n\r\n<p>ATTENTION: These terms of use set forth the basis on which you are permitted to access and use this website, demandware.com (the &quot;Website&quot;). Please read the terms of use carefully before using the Website. By accessing and using the Website in any way, including, without limitation, browsing the Website, you agree to and are bound by the terms of use described herein. If you do not agree to all of the terms and conditions contained herein, do not use the Website in any manner.</p>\r\n\r\n<h2>OWNERSHIP</h2>\r\n<p>All copyrights and other intellectual property rights in the Website, including without limitation all software and written and graphical content included in the Website, are owned by Demandware, Inc. (&quot;Demandware&quot;) and are hereby reserved.</p>\r\n\r\n<h2>USE OF WEBSITE AND DOCUMENTS</h2>\r\n<p>Demandware hereby authorizes you to make a single copy of the content displayed on the Website for your use in learning about, evaluating or acquiring Demandware services or products, provided (i) you mark such copy &quot;&copy; 2016 Demandware, Inc. All rights reserved.&quot;; (ii) the use of such copy is for informational and non-commercial or personal use and will not be copied or posted on any network computer or broadcast in any media; and (iii) no modifications to such copy are made. No other permission is granted to you to print, copy, reproduce, distribute, transmit, upload, download, store, perform, display in public, alter, or modify the content contained on the Website. Accredited educational institutions, such as K-12, universities and colleges, may download and reproduce the content displayed on the Website for distribution in the classroom. Distribution outside the classroom requires express written permission. Use for any other purpose is expressly prohibited by law, and may result in severe civil and criminal penalties. Violators will be prosecuted to the maximum extent possible. The Website may contain email services, bulletin board services, forums, communities, and/or other message or communication facilities designed to enable you to communicate with others (collectively &quot;Communication Services&quot;). You agree to use the Communication Services only to post, send and receive messages and material that are proper. By way of example, and not as a limitation, you agree that when using the Communication Services or the Website, you will not (i) use them in connection with surveys, contests, pyramid schemes, chain letters, junk email, spamming or any duplicative or unsolicited messages; (ii) defame, abuse, harass, threaten or otherwise violate the legal rights of others; (iii) publish, post, upload, distribute or disseminate any inappropriate, profane, defamatory, obscene, pornographic, racist, lewd, lascivious, excessively violent, harassing, unlawful, or otherwise objectionable topic, name, material or information; (iv) upload, or otherwise make available, files that contain material protected by intellectual property laws unless you own or control the rights thereto or have received all necessary consent to do the same; (v) advertise or offer to sell or buy any goods or services for any business purpose, unless such Communication Services specifically allows such messages; (vi) restrict or inhibit any other user from using and enjoying the Communication Services or the Website; (vii) harvest or otherwise collect information about others, including email addresses; or (viii) violate any applicable laws or regulations. Demandware has no obligation to monitor the Website or Communication Services. However, Demandware reserves the right to review materials posted to the Website and the Communication Services and to remove and/or edit any materials in its sole discretion. Demandware reserves the right to terminate your access to the Website and the Communication Services at any time, without notice, for any reason whatsoever. Demandware reserves the right at all times to disclose any information as it deems necessary to satisfy any applicable law, regulation, legal process or governmental request, or to edit, refuse to post or to remove any information or materials, in whole or in part, in Demandware's sole discretion.</p>\r\n\r\n<h2>TRADEMARKS/COPYRIGHTS</h2>\r\n<p>Demandware &reg;, Demandware eCommerce <sup>(SM)</sup>, the Demandware logo, and any other marks used on the Website are trademarks of Demandware or their respective owners. Such marks may not be used without the prior written consent of Demandware. Any use of those marks, or any others displayed on the Website, will inure solely to the benefit of their respective owners.</p>\r\n<p>Copyright Notice. Copyright &copy; 2004-2016 Demandware, Inc. All rights reserved.</p>\r\n\r\n<h2>UNSOLICITED SUBMISSION POLICY</h2>\r\n<p>Demandware does not accept or consider unsolicited ideas, suggestions, materials or other information (all of the foregoing being &quot;Submissions&quot;). The purpose for this policy is to avoid misunderstandings or disputes with respect to the origin of ideas, products, services and strategies of Demandware. Please do not send your unsolicited Submissions to Demandware or anyone at Demandware. In the event that you disregard this policy and post, upload, input, provide, submit or otherwise make a Submission to Demandware, (i) you will be granting Demandware and its affiliates permission to use your Submission in connection with the operation of its businesses (the &quot;License&quot;), including, without limitation, the right to copy, distribute, display, edit, reproduce, translate and reformat your Submission for both commercial and non-commercial purposes, (ii) you warrant and represent that you own or otherwise control all of the rights to your Submission, including, without limitation, the rights necessary to grant the License and (iii) any such Submissions will be considered non confidential and non proprietary communications. No compensation will be paid with respect to your Submission. Demandware will not be subject to any obligation of confidence with respect to your Submission.</p>\r\n\r\n<h2>NO UNLAWFUL OR PROHIBITED USE</h2>\r\n<p>You may not use the Website for any purpose that is unlawful or prohibited by the terms and conditions provided herein. You may not use the Website in any manner that could damage, disable, overburden or otherwise impair any Demandware server or the networks connected to any Demandware server, or interfere with any other person's use and enjoyment of the Website. You may not attempt to gain unauthorized access to the Website or the computer systems or networks connected to any Demandware server through any means. You may not obtain any materials or information through any means not intentionally made available to you through the Website.</p>\r\n\r\n<h2>LINKS</h2>\r\n<p>Any links to third party websites are provided for your convenience only, and Demandware makes no recommendation or endorsement as to such websites or the products or services offered thereon.</p>\r\n<p>You may link to the Demandware Website, unless notified otherwise in writing by Demandware. However, you may not frame the Website in a manner that may cause confusion to Demandware customers, nor may you interfere or attempt to interfere in any way with the operation of the Website, including without limitation through data mining, the use of any robot, scraper or other automated device, or circumvention or attempted circumvention of any website security features.</p>\r\n\r\n<h2>SPAM EMAIL AND POSTINGS</h2>\r\n<p>You agree that Demandware would be irreparably harmed by the use, by you or others, of the Website or facilities in connection with the transmission of spam, newsgroup postings or unsolicited email in violation of the terms of use as provided herein, and that Demandware is entitled to obtain injunctive relief against any such transmission (in addition to all other remedies available at law or in equity). Demandware reserves the right to block, filter or delete unsolicited email.</p>\r\n\r\n<h2>U.S. EXPORT ADMINISTRATION LAWS AND REGULATIONS</h2>\r\n<p>You acknowledge and agree that material on the Website is subject to the U.S. Export Administration Laws and Regulations. Diversion of such material contrary to U.S. law is prohibited. You agree that none of the material on the Website, nor any direct product therefrom, is being or will be acquired for, shipped, transferred, or re-exported, directly or indirectly, to proscribed or embargoed countries or their nationals, nor be used for nuclear activities, chemical biological weapons, or missile projects unless authorized by the U.S. Government. You certify that you are not on the U.S. Department of Commerce's Denied Persons List or affiliated lists or on the U.S. Department of Treasury's Specially Designated Nationals List. You agree to comply strictly with all U.S. export laws and assume sole responsibility for obtaining licenses to export or re-export as may be required.</p>\r\n\r\n\r\n<h2>DISCLAIMER</h2>\r\n<p>THE CONTENT CONTAINED IN THE WEBSITE IS PROVIDED BY DEMANDWARE FOR GENERAL INFORMATIONAL PURPOSES ONLY AND DOES NOT CONSTITUTE A SPECIFIC RECOMMENDATION OR ADVICE. SUCH CONTENT IS PROVIDED &quot;AS IS&quot; WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, AND IS SUBJECT TO CHANGE WITHOUT NOTICE. YOUR USE OF THE WEBSITE IS AT YOUR SOLE RISK, AND YOU ASSUME ALL LIABILITY IN RELATION TO IT.</p>\r\n<p>ANY INFORMATION OR ADVICE PROVIDED THROUGH THE WEBSITE THAT IS RELATED TO SUPPORT OF DEMANDWARE SOFTWARE PRODUCTS IS SUBJECT TO THE TERMS AND CONDITIONS OF THE LICENSE AND SUPPORT AGREEMENT BETWEEN YOU AND DEMANDWARE, AND NOT TO THESE TERMS OF USE.</p>\r\n<p>ANY MENTION IN THE WEBSITE OF NON DEMANDWARE PRODUCTS OR SERVICES IS FOR INFORMATION PURPOSES ONLY AND CONSTITUTES NEITHER AN ENDORSEMENT NOR A RECOMMENDATION.</p>\r\n\r\n\r\n<h2>LIMITATION ON LIABILITY</h2>\r\n<p>AS CONSIDERATION FOR YOUR USE OF AND ACCESS TO THE WEBSITE, AND TO THE MAXIMUM EXTENT PERMITTED BY LAW, YOU AGREE THAT: (i) IN NO EVENT WILL DEMANDWARE OR ANY OTHER PARTY INVOLVED IN CREATING, PRODUCING, OR DELIVERING THE WEBSITE OR ANY SITE LINKED TO THE WEBSITE, BE LIABLE TO YOU IN ANY MANNER WHATSOEVER FOR ANY DECISION MADE OR ACTION OR NON-ACTION TAKEN BY YOU IN RELIANCE UPON THE INFORMATION PROVIDED THROUGH THE WEBSITE; AND (ii) THE AGGREGATE LIABILITY OF DEMANDWARE OR ANY OF ITS DISTRIBUTORS OR DEALERS, ARISING FROM OR RELATING TO THIS AGREEMENT (REGARDLESS OF THE FORM OF ACTION OR CLAIM, e.g. CONTRACT, WARRANTY, TORT, STRICT LIABILITY, NEGLIGENCE, FRAUD, AND/OR OTHERWISE) IS LIMITED TO $100; AND (iii) DEMANDWARE SHALL NOT IN ANY CASE BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, EVEN IF DEMANDWARE HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>\r\n<p>Some jurisdictions do not allow the exclusion of implied warranties, so the above exclusion may not apply to you.</p>\r\n\r\n\r\n<h2>NOTICES OF COPYRIGHT INFRINGEMENT</h2>\r\n<p>If you believe that material posted on the Website infringes your copyright, you should provide notice of such infringement to the following person, who is Demandware's designated agent for the purposes of the Digital Millennium Copyright Act (17 U.S.C. 512):</p>\r\n<p>Demandware, Inc.<br />\r\n5 Wall St<br />\r\nBurlington, MA 01803, USA<br />\r\n<a href=\"mailto:info@demandware.com\">info@demandware.com</a></p>\r\n\r\n<h2>ENTIRE AGREEMENT</h2>\r\n<p>These terms of use are the entire agreement between you and Demandware in relation to your use of the Website, and all other representations or discussions are hereby excluded from this agreement. If any part of these terms are held to be invalid or unenforceable, the remaining provisions shall remain in full force and effect. Demandware's failure to insist on or enforce strict performance of these terms shall not constitute a waiver of any breach or any future breaches thereof.</p>\r\n\r\n<h2>GOVERNING LAW AND JURISDICTION</h2>\r\n<p>The Website is controlled and operated from within the United States, and Demandware does not represent that the Website is appropriate for use outside the United States. If you access the Website from outside the United States, you are responsible for compliance with any applicable local law. Your use of the Website shall be governed in all respects by the laws of the Commonwealth of Massachusetts, USA, without regard to choice of law provisions, and not by the United Nations Convention on Contracts for the International Sale of Goods. You agree that jurisdiction over and venue in any proceeding directly or indirectly arising out of or relating to the Website shall be in the state or federal courts located in Suffolk County or Middlesex County, Massachusetts.</p>",
      c__context: {
        config: this.__config,
        meta: {
          url: '/Some/SEO/URL',
          title: 'Some SEO Title',
          description: 'Some Meta Description',
          keywords: 'Some Keywords',
          image: 'http://path/to/image.jpg'
        },
        categories: [{
          id: 'category_id'
        }],
        contents: [{
          id: 'content_id'
        }]
      }
    };
  }
}

module.exports = ContentModel;
